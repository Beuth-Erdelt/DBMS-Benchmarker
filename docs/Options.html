

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Options &mdash; DBMSBenchmarker 0.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> DBMSBenchmarker
          

          
          </a>

          
            
            
              <div class="version">
                0.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Options</a><ul>
<li><a class="reference internal" href="#featured-parameters">Featured Parameters</a></li>
<li><a class="reference internal" href="#command-line-options-and-configuration">Command Line Options and Configuration</a><ul>
<li><a class="reference internal" href="#result-folder">Result folder</a></li>
<li><a class="reference internal" href="#config-folder">Config folder</a></li>
<li><a class="reference internal" href="#connection-file">Connection File</a></li>
<li><a class="reference internal" href="#query-file">Query File</a></li>
<li><a class="reference internal" href="#extended-query-file">Extended Query File</a><ul>
<li><a class="reference internal" href="#reporting">Reporting</a></li>
<li><a class="reference internal" href="#sql-dialects">SQL Dialects</a></li>
<li><a class="reference internal" href="#connection-management">Connection Management</a></li>
<li><a class="reference internal" href="#connection-latency">Connection Latency</a></li>
<li><a class="reference internal" href="#results-and-comparison">Results and Comparison</a></li>
</ul>
</li>
<li><a class="reference internal" href="#randomized-query-file">Randomized Query File</a></li>
<li><a class="reference internal" href="#query-list">Query List</a></li>
<li><a class="reference internal" href="#query">Query</a></li>
<li><a class="reference internal" href="#connection">Connection</a></li>
<li><a class="reference internal" href="#generate-reports">Generate reports</a></li>
<li><a class="reference internal" href="#generate-evaluation">Generate evaluation</a></li>
<li><a class="reference internal" href="#debug">Debug</a></li>
<li><a class="reference internal" href="#sleep">Sleep</a></li>
<li><a class="reference internal" href="#batch">Batch</a></li>
<li><a class="reference internal" href="#verbosity-level">Verbosity Level</a></li>
<li><a class="reference internal" href="#working-querywise-or-connectionswise">Working querywise or connectionswise</a></li>
<li><a class="reference internal" href="#anonymize">Anonymize</a></li>
<li><a class="reference internal" href="#latex-reports">Latex reports</a></li>
<li><a class="reference internal" href="#client-processes">Client processes</a></li>
<li><a class="reference internal" href="#random-seed">Random Seed</a></li>
<li><a class="reference internal" href="#subfolders">Subfolders</a></li>
<li><a class="reference internal" href="#delay-start">Delay start</a></li>
<li><a class="reference internal" href="#id2">Monitoring</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">DBMSBenchmarker</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Options</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/Options.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="options">
<h1>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h1>
<div class="section" id="featured-parameters">
<h2>Featured Parameters<a class="headerlink" href="#featured-parameters" title="Permalink to this headline">¶</a></h2>
<p>The lists of <a class="reference external" href="#connection-file">DBMS</a> and <a class="reference external" href="#query-file">queries</a> are given in config files in dict format.</p>
<p>Benchmarks can be <a class="reference external" href="#query-file">parametrized</a> by</p>
<ul class="simple">
<li><p>number of benchmark runs: <em>Is performance stable across time?</em></p></li>
<li><p>number of benchmark runs per connection: <em>How does reusing a connection affect performance?</em></p></li>
<li><p>number of warmup and cooldown runs, if any: <em>How does (re)establishing a connection affect performance?</em></p></li>
<li><p>number of parallel clients: <em>How do multiple user scenarios affect performance?</em></p></li>
<li><p>optional list of timers (currently: connection, execution, data transfer, run and session): <em>Where does my time go?</em></p></li>
<li><p><a class="reference external" href="#query-list">sequences</a> of queries: <em>How does sequencing influence performance?</em></p></li>
<li><p>optional <a class="reference external" href="#results-and-comparison">comparison</a> of result sets: <em>Do I always receive the same results sets?</em></p></li>
</ul>
<p>Benchmarks can be <a class="reference external" href="#randomized-query-file">randomized</a> (optionally with specified <a class="reference external" href="#random-seed">seeds</a> for reproducible results) to avoid caching side effects and to increase variety of queries by taking samples of arbitrary size from a</p>
<ul class="simple">
<li><p>list of elements</p></li>
<li><p>dict of elements (one-to-many relations)</p></li>
<li><p>range of integers</p></li>
<li><p>range of floats</p></li>
<li><p>range of days</p></li>
<li><p>range of (first of) months</p></li>
<li><p>range of years</p></li>
</ul>
<p>This is inspired by <a class="reference external" href="http://www.tpc.org/tpch/">TPC-H</a> and <a class="reference external" href="http://www.tpc.org/tpcds/">TPC-DS</a> - Decision Support Benchmarks.</p>
</div>
<div class="section" id="command-line-options-and-configuration">
<h2>Command Line Options and Configuration<a class="headerlink" href="#command-line-options-and-configuration" title="Permalink to this headline">¶</a></h2>
<p>How to configure the benchmarker can be illustrated best by looking at the source code of the <a class="reference external" href="../benchmark.py">command line tool</a>, which will be described in the following.</p>
<p><code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">benchmark.py</span> <span class="pre">-h</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">usage</span><span class="p">:</span> <span class="n">benchmark</span><span class="o">.</span><span class="n">py</span> <span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">d</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">b</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">qf</span> <span class="n">QUERY_FILE</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">cf</span> <span class="n">CONNECTION_FILE</span><span class="p">]</span>
                    <span class="p">[</span><span class="o">-</span><span class="n">q</span> <span class="n">QUERY</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">c</span> <span class="n">CONNECTION</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">l</span> <span class="n">LATEX_TEMPLATE</span><span class="p">]</span>
                    <span class="p">[</span><span class="o">-</span><span class="n">f</span> <span class="n">CONFIG_FOLDER</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">r</span> <span class="n">RESULT_FOLDER</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">g</span> <span class="p">{</span><span class="n">no</span><span class="p">,</span><span class="n">yes</span><span class="p">}]</span>
                    <span class="p">[</span><span class="o">-</span><span class="n">e</span> <span class="p">{</span><span class="n">no</span><span class="p">,</span><span class="n">yes</span><span class="p">}]</span> <span class="p">[</span><span class="o">-</span><span class="n">w</span> <span class="p">{</span><span class="n">query</span><span class="p">,</span><span class="n">connection</span><span class="p">}]</span> <span class="p">[</span><span class="o">-</span><span class="n">a</span><span class="p">]</span>
                    <span class="p">[</span><span class="o">-</span><span class="n">u</span> <span class="p">[</span><span class="n">UNANONYMIZE</span> <span class="p">[</span><span class="n">UNANONYMIZE</span> <span class="o">...</span><span class="p">]]]</span> <span class="p">[</span><span class="o">-</span><span class="n">p</span> <span class="n">NUMPROCESSES</span><span class="p">]</span>
                    <span class="p">[</span><span class="o">-</span><span class="n">s</span> <span class="n">SEED</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">cs</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">ms</span> <span class="n">MAX_SUBFOLDERS</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">sl</span> <span class="n">SLEEP</span><span class="p">]</span>
                    <span class="p">[</span><span class="o">-</span><span class="n">st</span> <span class="n">START_TIME</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">sf</span> <span class="n">SUBFOLDER</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">vq</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">vs</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">pn</span> <span class="n">NUM_RUN</span><span class="p">]</span>
                    <span class="p">[</span><span class="o">-</span><span class="n">m</span><span class="p">]</span>
                    <span class="p">{</span><span class="n">run</span><span class="p">,</span><span class="n">read</span><span class="p">,</span><span class="k">continue</span><span class="p">}</span>

<span class="n">A</span> <span class="n">benchmark</span> <span class="n">tool</span> <span class="k">for</span> <span class="n">RDBMS</span><span class="o">.</span> <span class="n">It</span> <span class="n">connects</span> <span class="n">to</span> <span class="n">a</span> <span class="n">given</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">RDBMS</span> <span class="n">via</span> <span class="n">JDBC</span> <span class="ow">and</span>
<span class="n">runs</span> <span class="n">a</span> <span class="n">given</span> <span class="nb">list</span> <span class="n">benchmark</span> <span class="n">queries</span><span class="o">.</span> <span class="n">Optionally</span> <span class="n">some</span> <span class="n">reports</span> <span class="n">are</span> <span class="n">generated</span><span class="o">.</span>

<span class="n">positional</span> <span class="n">arguments</span><span class="p">:</span>
  <span class="p">{</span><span class="n">run</span><span class="p">,</span><span class="n">read</span><span class="p">,</span><span class="k">continue</span><span class="p">}</span>   <span class="n">run</span> <span class="n">benchmarks</span> <span class="ow">and</span> <span class="n">save</span> <span class="n">results</span><span class="p">,</span> <span class="ow">or</span> <span class="n">just</span> <span class="n">read</span> <span class="n">benchmark</span> <span class="n">results</span> <span class="kn">from</span> <span class="nn">folder</span><span class="p">,</span> <span class="ow">or</span> <span class="k">continue</span> <span class="k">with</span> <span class="n">missing</span> <span class="n">benchmarks</span> <span class="n">only</span>

<span class="n">optional</span> <span class="n">arguments</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>            <span class="n">show</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span>
  <span class="o">-</span><span class="n">d</span><span class="p">,</span> <span class="o">--</span><span class="n">debug</span>           <span class="n">dump</span> <span class="n">debug</span> <span class="n">informations</span>
  <span class="o">-</span><span class="n">b</span><span class="p">,</span> <span class="o">--</span><span class="n">batch</span>           <span class="n">batch</span> <span class="n">mode</span> <span class="p">(</span><span class="n">more</span> <span class="n">protocol</span><span class="o">-</span><span class="n">like</span> <span class="n">output</span><span class="p">),</span> <span class="n">automatically</span> <span class="n">on</span> <span class="k">for</span> <span class="n">debug</span> <span class="n">mode</span>
  <span class="o">-</span><span class="n">qf</span> <span class="n">QUERY_FILE</span><span class="p">,</span> <span class="o">--</span><span class="n">query</span><span class="o">-</span><span class="n">file</span> <span class="n">QUERY_FILE</span>
                        <span class="n">name</span> <span class="n">of</span> <span class="n">query</span> <span class="n">config</span> <span class="n">file</span>
  <span class="o">-</span><span class="n">cf</span> <span class="n">CONNECTION_FILE</span><span class="p">,</span> <span class="o">--</span><span class="n">connection</span><span class="o">-</span><span class="n">file</span> <span class="n">CONNECTION_FILE</span>
                        <span class="n">name</span> <span class="n">of</span> <span class="n">connection</span> <span class="n">config</span> <span class="n">file</span>
  <span class="o">-</span><span class="n">q</span> <span class="n">QUERY</span><span class="p">,</span> <span class="o">--</span><span class="n">query</span> <span class="n">QUERY</span>
                        <span class="n">number</span> <span class="n">of</span> <span class="n">query</span> <span class="n">to</span> <span class="n">benchmark</span>
  <span class="o">-</span><span class="n">c</span> <span class="n">CONNECTION</span><span class="p">,</span> <span class="o">--</span><span class="n">connection</span> <span class="n">CONNECTION</span>
                        <span class="n">name</span> <span class="n">of</span> <span class="n">connection</span> <span class="n">to</span> <span class="n">benchmark</span>
  <span class="o">-</span><span class="n">l</span> <span class="n">LATEX_TEMPLATE</span><span class="p">,</span> <span class="o">--</span><span class="n">latex</span><span class="o">-</span><span class="n">template</span> <span class="n">LATEX_TEMPLATE</span>
                        <span class="n">name</span> <span class="n">of</span> <span class="n">latex</span> <span class="n">template</span> <span class="k">for</span> <span class="n">reporting</span>
  <span class="o">-</span><span class="n">f</span> <span class="n">CONFIG_FOLDER</span><span class="p">,</span> <span class="o">--</span><span class="n">config</span><span class="o">-</span><span class="n">folder</span> <span class="n">CONFIG_FOLDER</span>
                        <span class="n">folder</span> <span class="n">containing</span> <span class="n">query</span> <span class="ow">and</span> <span class="n">connection</span> <span class="n">config</span> <span class="n">files</span><span class="o">.</span> <span class="n">If</span> <span class="nb">set</span><span class="p">,</span> <span class="n">the</span> <span class="n">names</span> <span class="n">connections</span><span class="o">.</span><span class="n">config</span> <span class="ow">and</span> <span class="n">queries</span><span class="o">.</span><span class="n">config</span> <span class="n">are</span> <span class="n">assumed</span> <span class="n">automatically</span><span class="o">.</span>
  <span class="o">-</span><span class="n">r</span> <span class="n">RESULT_FOLDER</span><span class="p">,</span> <span class="o">--</span><span class="n">result</span><span class="o">-</span><span class="n">folder</span> <span class="n">RESULT_FOLDER</span>
                        <span class="n">folder</span> <span class="k">for</span> <span class="n">storing</span> <span class="n">benchmark</span> <span class="n">result</span> <span class="n">files</span><span class="p">,</span> <span class="n">default</span> <span class="ow">is</span> <span class="n">given</span> <span class="n">by</span> <span class="n">timestamp</span>
  <span class="o">-</span><span class="n">g</span> <span class="p">{</span><span class="n">no</span><span class="p">,</span><span class="n">yes</span><span class="p">},</span> <span class="o">--</span><span class="n">generate</span><span class="o">-</span><span class="n">output</span> <span class="p">{</span><span class="n">no</span><span class="p">,</span><span class="n">yes</span><span class="p">}</span>
                        <span class="n">generate</span> <span class="n">new</span> <span class="n">report</span> <span class="n">files</span>
  <span class="o">-</span><span class="n">e</span> <span class="p">{</span><span class="n">no</span><span class="p">,</span><span class="n">yes</span><span class="p">},</span> <span class="o">--</span><span class="n">generate</span><span class="o">-</span><span class="n">evaluation</span> <span class="p">{</span><span class="n">no</span><span class="p">,</span><span class="n">yes</span><span class="p">}</span>
                        <span class="n">generate</span> <span class="n">new</span> <span class="n">evaluation</span> <span class="n">file</span>
  <span class="o">-</span><span class="n">w</span> <span class="p">{</span><span class="n">query</span><span class="p">,</span><span class="n">connection</span><span class="p">},</span> <span class="o">--</span><span class="n">working</span> <span class="p">{</span><span class="n">query</span><span class="p">,</span><span class="n">connection</span><span class="p">}</span>
                        <span class="n">working</span> <span class="n">per</span> <span class="n">query</span> <span class="ow">or</span> <span class="n">connection</span>
  <span class="o">-</span><span class="n">a</span><span class="p">,</span> <span class="o">--</span><span class="n">anonymize</span>       <span class="n">anonymize</span> <span class="nb">all</span> <span class="n">dbms</span>
  <span class="o">-</span><span class="n">u</span> <span class="p">[</span><span class="n">UNANONYMIZE</span> <span class="p">[</span><span class="n">UNANONYMIZE</span> <span class="o">...</span><span class="p">]],</span> <span class="o">--</span><span class="n">unanonymize</span> <span class="p">[</span><span class="n">UNANONYMIZE</span> <span class="p">[</span><span class="n">UNANONYMIZE</span> <span class="o">...</span><span class="p">]]</span>
                        <span class="n">unanonymize</span> <span class="n">some</span> <span class="n">dbms</span><span class="p">,</span> <span class="n">only</span> <span class="n">sensible</span> <span class="ow">in</span> <span class="n">combination</span> <span class="k">with</span> <span class="n">anonymize</span>
  <span class="o">-</span><span class="n">p</span> <span class="n">NUMPROCESSES</span><span class="p">,</span> <span class="o">--</span><span class="n">numProcesses</span> <span class="n">NUMPROCESSES</span>
                        <span class="n">Number</span> <span class="n">of</span> <span class="n">parallel</span> <span class="n">client</span> <span class="n">processes</span><span class="o">.</span> <span class="n">Global</span> <span class="n">setting</span><span class="p">,</span> <span class="n">can</span> <span class="n">be</span> <span class="n">overwritten</span> <span class="n">by</span> <span class="n">connection</span><span class="o">.</span> <span class="n">If</span> <span class="kc">None</span> <span class="n">given</span><span class="p">,</span> <span class="n">half</span> <span class="n">of</span> <span class="nb">all</span> <span class="n">available</span> <span class="n">processes</span> <span class="ow">is</span> <span class="n">taken</span>
  <span class="o">-</span><span class="n">s</span> <span class="n">SEED</span><span class="p">,</span> <span class="o">--</span><span class="n">seed</span> <span class="n">SEED</span>  <span class="n">random</span> <span class="n">seed</span>
  <span class="o">-</span><span class="n">cs</span><span class="p">,</span> <span class="o">--</span><span class="n">copy</span><span class="o">-</span><span class="n">subfolder</span>
                        <span class="n">copy</span> <span class="n">subfolder</span> <span class="n">of</span> <span class="n">result</span> <span class="n">folder</span>
  <span class="o">-</span><span class="n">ms</span> <span class="n">MAX_SUBFOLDERS</span><span class="p">,</span> <span class="o">--</span><span class="nb">max</span><span class="o">-</span><span class="n">subfolders</span> <span class="n">MAX_SUBFOLDERS</span>
                        <span class="n">maximum</span> <span class="n">number</span> <span class="n">of</span> <span class="n">subfolders</span> <span class="n">of</span> <span class="n">result</span> <span class="n">folder</span>
  <span class="o">-</span><span class="n">sl</span> <span class="n">SLEEP</span><span class="p">,</span> <span class="o">--</span><span class="n">sleep</span> <span class="n">SLEEP</span>
                        <span class="n">sleep</span> <span class="n">SLEEP</span> <span class="n">seconds</span> <span class="n">before</span> <span class="n">going</span> <span class="n">to</span> <span class="n">work</span>
  <span class="o">-</span><span class="n">st</span> <span class="n">START_TIME</span><span class="p">,</span> <span class="o">--</span><span class="n">start</span><span class="o">-</span><span class="n">time</span> <span class="n">START_TIME</span>
                        <span class="n">sleep</span> <span class="n">until</span> <span class="n">START</span><span class="o">-</span><span class="n">TIME</span> <span class="n">before</span> <span class="n">beginning</span> <span class="n">benchmarking</span>
  <span class="o">-</span><span class="n">sf</span> <span class="n">SUBFOLDER</span><span class="p">,</span> <span class="o">--</span><span class="n">subfolder</span> <span class="n">SUBFOLDER</span>
                        <span class="n">stores</span> <span class="n">results</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">SUBFOLDER</span> <span class="n">of</span> <span class="n">the</span> <span class="n">result</span> <span class="n">folder</span>
  <span class="o">-</span><span class="n">vq</span><span class="p">,</span> <span class="o">--</span><span class="n">verbose</span><span class="o">-</span><span class="n">queries</span>
                        <span class="nb">print</span> <span class="n">every</span> <span class="n">query</span> <span class="n">that</span> <span class="ow">is</span> <span class="n">sent</span>
  <span class="o">-</span><span class="n">vs</span><span class="p">,</span> <span class="o">--</span><span class="n">verbose</span><span class="o">-</span><span class="n">statistics</span>
                        <span class="nb">print</span> <span class="n">statistics</span> <span class="n">about</span> <span class="n">query</span> <span class="n">that</span> <span class="n">have</span> <span class="n">been</span> <span class="n">sent</span>
  <span class="o">-</span><span class="n">pn</span> <span class="n">NUM_RUN</span><span class="p">,</span> <span class="o">--</span><span class="n">num</span><span class="o">-</span><span class="n">run</span> <span class="n">NUM_RUN</span>
                        <span class="n">Parameter</span><span class="p">:</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">executions</span> <span class="n">per</span> <span class="n">query</span>
  <span class="o">-</span><span class="n">m</span><span class="p">,</span> <span class="o">--</span><span class="n">metrics</span>         <span class="n">collect</span> <span class="n">hardware</span> <span class="n">metrics</span>
</pre></div>
</div>
<div class="section" id="result-folder">
<h3>Result folder<a class="headerlink" href="#result-folder" title="Permalink to this headline">¶</a></h3>
<p>This optional argument is the name of a folder.</p>
<p>If this folder contains results, results saved inside can be read or benchmarks saved there can be continued.<span class="raw-html-m2r"><br></span>
Example: <code class="docutils literal notranslate"><span class="pre">-r</span> <span class="pre">/tmp/dbmsresults/1234/</span></code> contains benchmarks of code <code class="docutils literal notranslate"><span class="pre">1234</span></code>.</p>
<p>If this folder does not contain results, a new subfolder is generated.
It’s name is set automatically to some number derived from current timestamp.
Results and reports are stored there.
Input files for connections and queries are copied to this folder.<span class="raw-html-m2r"><br></span>
Example: <code class="docutils literal notranslate"><span class="pre">-r</span> <span class="pre">/tmp/dbmsresults/</span></code>, and a subfolder, say <code class="docutils literal notranslate"><span class="pre">1234</span></code>, will be generated containing results.</p>
</div>
<div class="section" id="config-folder">
<h3>Config folder<a class="headerlink" href="#config-folder" title="Permalink to this headline">¶</a></h3>
<p>Name of folder containing query and connection config files.
If set, the names <code class="docutils literal notranslate"><span class="pre">connections.config</span></code> and <code class="docutils literal notranslate"><span class="pre">queries.config</span></code> are assumed automatically.</p>
</div>
<div class="section" id="connection-file">
<h3>Connection File<a class="headerlink" href="#connection-file" title="Permalink to this headline">¶</a></h3>
<p>Contains infos about JDBC connections.</p>
<p>Example for <code class="docutils literal notranslate"><span class="pre">CONNECTION_FILE</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">{</span>
    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s2">&quot;MySQL&quot;</span><span class="p">,</span>
    <span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="s2">&quot;CE 8.0.13&quot;</span><span class="p">,</span>
    <span class="s1">&#39;info&#39;</span><span class="p">:</span> <span class="s2">&quot;This uses engine innodb&quot;</span><span class="p">,</span>
    <span class="s1">&#39;active&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;alias&#39;</span><span class="p">:</span> <span class="s2">&quot;DBMS A&quot;</span><span class="p">,</span>
    <span class="s1">&#39;docker&#39;</span><span class="p">:</span> <span class="s2">&quot;MySQL&quot;</span><span class="p">,</span>
    <span class="s1">&#39;docker_alias&#39;</span><span class="p">:</span> <span class="s2">&quot;DBMS A&quot;</span><span class="p">,</span>
    <span class="s1">&#39;dialect&#39;</span><span class="p">:</span> <span class="s2">&quot;MySQL&quot;</span><span class="p">,</span>
    <span class="s1">&#39;timeload&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
    <span class="s1">&#39;priceperhourdollar&#39;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="s1">&#39;JDBC&#39;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s1">&#39;driver&#39;</span><span class="p">:</span> <span class="s2">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="p">,</span>
      <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s2">&quot;jdbc:mysql://localhost:3306/database&quot;</span><span class="p">,</span>
      <span class="s1">&#39;auth&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">,</span> <span class="s2">&quot;password&quot;</span><span class="p">],</span>
      <span class="s1">&#39;jar&#39;</span><span class="p">:</span> <span class="s2">&quot;mysql-connector-java-8.0.13.jar&quot;</span>
    <span class="p">},</span>
    <span class="s1">&#39;connectionmanagement&#39;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="mi">600</span><span class="p">,</span>
      <span class="s1">&#39;numProcesses&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
      <span class="s1">&#39;runsPerConnection&#39;</span><span class="p">:</span> <span class="mi">5</span>
    <span class="p">},</span>
    <span class="s1">&#39;hostsystem&#39;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s1">&#39;RAM&#39;</span><span class="p">:</span> <span class="mf">61.0</span><span class="p">,</span>
      <span class="s1">&#39;CPU&#39;</span><span class="p">:</span> <span class="s1">&#39;Intel(R) Xeon(R) CPU E5-2686 v4 @ 2.30GHz</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span>
      <span class="s1">&#39;Cores&#39;</span><span class="p">:</span> <span class="s1">&#39;8</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span>
      <span class="s1">&#39;host&#39;</span><span class="p">:</span> <span class="s1">&#39;4.4.0-1075-aws</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span>
      <span class="s1">&#39;disk&#39;</span><span class="p">:</span> <span class="s1">&#39;82G</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span>
      <span class="s1">&#39;CUDA&#39;</span><span class="p">:</span> <span class="s1">&#39; NVIDIA-SMI 410.79       Driver Version: 410.79       CUDA Version: 10.0&#39;</span><span class="p">,</span>
      <span class="s1">&#39;instance&#39;</span><span class="p">:</span> <span class="s1">&#39;p3.2xlarge&#39;</span>
    <span class="p">}</span>
<span class="p">},</span>
<span class="p">]</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: References the connection</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">version</span></code> and <code class="docutils literal notranslate"><span class="pre">info</span></code>: Just info texts for implementation in reports</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">active</span></code>: Use this connection in benchmarking and reporting (optional, default True)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">alias</span></code>: Alias for anonymized reports (optional, default is a random name)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">docker</span></code>: Name of the docker image. This helps aggregating connections using the same docker image.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">docker_alias</span></code>: Anonymized name of the docker image. This helps aggregating connections using the same docker image in anonymized reports.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">alias</span></code>: Alias for anonymized reports (optional default is a random name)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dialect</span></code>: Key for (optional) alternative SQL statements in the query file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">driver</span></code>, <code class="docutils literal notranslate"><span class="pre">url</span></code>, <code class="docutils literal notranslate"><span class="pre">auth</span></code>, <code class="docutils literal notranslate"><span class="pre">jar</span></code>: JDBC data</p></li>
<li><p>Additional information useful for reporting and also used for computations</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">timeload</span></code>: Time for ingest (in milliseconds), because not part of the benchmark</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">priceperhourdollar</span></code>: Used to compute total cost based on total time (optional)</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">connectionmanagement</span></code>: Parameter for connection management. This overwrites general settings made in the <a class="reference external" href="#extended-query-file">query config</a> and can be overwritten by query-wise settings made there.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">timeout</span></code>: Maximum lifespan of a connection. Default is None, i.e. no limit.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">numProcesses</span></code>: Number of parallel client processes. Default is 1.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">runsPerConnection</span></code>: Number of runs performed before connection is closed. Default is None, i.e. no limit.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">hostsystem</span></code>: Describing information for report in particular about the host system.
This can be written automatically by <a class="reference external" href="https://github.com/Beuth-Erdelt/Benchmark-Experiment-Host-Manager">https://github.com/Beuth-Erdelt/Benchmark-Experiment-Host-Manager</a></p></li>
</ul>
<p>We might also add information about fetching <a class="reference external" href="#monitoring">monitoring</a> metrics.</p>
</div>
<div class="section" id="query-file">
<h3>Query File<a class="headerlink" href="#query-file" title="Permalink to this headline">¶</a></h3>
<p>Contains the queries to benchmark.</p>
<p>Example for <code class="docutils literal notranslate"><span class="pre">QUERY_FILE</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Some simple queries&#39;</span><span class="p">,</span>
  <span class="s1">&#39;intro&#39;</span><span class="p">:</span> <span class="s1">&#39;Some describing text about this benchmark test setup&#39;</span><span class="p">,</span>
  <span class="s1">&#39;factor&#39;</span><span class="p">:</span> <span class="s1">&#39;mean&#39;</span><span class="p">,</span>
  <span class="s1">&#39;queries&#39;</span><span class="p">:</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s2">&quot;Count all rows in test&quot;</span><span class="p">,</span>
      <span class="s1">&#39;query&#39;</span><span class="p">:</span> <span class="s2">&quot;SELECT COUNT(*) FROM test&quot;</span><span class="p">,</span>
      <span class="s1">&#39;numWarmup&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
      <span class="s1">&#39;numCooldown&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
      <span class="s1">&#39;delay&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="s1">&#39;numRun&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: Name of the list of queries</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">intro</span></code>: Introductional text for reports</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">factor</span></code>: Determines the measure for comparing performances (optional). Can be set to <code class="docutils literal notranslate"><span class="pre">mean</span></code> or <code class="docutils literal notranslate"><span class="pre">median</span></code> or <code class="docutils literal notranslate"><span class="pre">relative</span></code>. Default is <code class="docutils literal notranslate"><span class="pre">mean</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">query</span></code>: SQL query string</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">title</span></code>: Title of the query</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">numRun</span></code>: Number of runs of this query for benchmarking</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">numWarmup</span></code>: Number of runs of this query for warmup (first <code class="docutils literal notranslate"><span class="pre">n</span></code> queries not counting into statistics), between 0 and <code class="docutils literal notranslate"><span class="pre">numRun</span></code>. This makes sure data is hot and caching is in effect.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">numCooldown</span></code>: Number of runs of this query for cooldown (last <code class="docutils literal notranslate"><span class="pre">n</span></code> queries not counting into statistics), between 0 and <code class="docutils literal notranslate"><span class="pre">numRun</span></code>. This helps sorting out faster executions when the number of parallel clients decreases near the end of a batch.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">delay</span></code>: Number of seconds to wait before each execution statement. This is for throtteling. Default is 0.</p></li>
</ul>
<p>Such a query will be executed 10 times, the time of execution will be measured each time, and statistics will be computed for the runs 6,7 and 8.</p>
</div>
<div class="section" id="extended-query-file">
<h3>Extended Query File<a class="headerlink" href="#extended-query-file" title="Permalink to this headline">¶</a></h3>
<p>Extended example for <code class="docutils literal notranslate"><span class="pre">QUERY_FILE</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Some simple queries&#39;</span><span class="p">,</span>
  <span class="s1">&#39;intro&#39;</span><span class="p">:</span> <span class="s1">&#39;This is an example workload&#39;</span><span class="p">,</span>
  <span class="s1">&#39;info&#39;</span><span class="p">:</span> <span class="s1">&#39;It runs on a P100 GPU&#39;</span><span class="p">,</span>
  <span class="s1">&#39;reporting&#39;</span><span class="p">:</span>
  <span class="p">{</span>
    <span class="s1">&#39;resultsetPerQuery&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s1">&#39;resultsetPerQueryConnection&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s1">&#39;queryparameter&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s1">&#39;rowsPerResultset&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="s1">&#39;connectionmanagement&#39;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="mi">600</span><span class="p">,</span>
    <span class="s1">&#39;numProcesses&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="s1">&#39;runsPerConnection&#39;</span><span class="p">:</span> <span class="mi">5</span>
  <span class="p">},</span>
  <span class="s1">&#39;queries&#39;</span><span class="p">:</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s2">&quot;Count all rows in test&quot;</span><span class="p">,</span>
      <span class="s1">&#39;query&#39;</span><span class="p">:</span> <span class="s2">&quot;SELECT COUNT(*) c FROM test&quot;</span><span class="p">,</span>
      <span class="s1">&#39;DBMS&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;MySQL&#39;</span><span class="p">:</span> <span class="s2">&quot;SELECT COUNT(*) AS c FROM test&quot;</span>
      <span class="p">}</span>
      <span class="s1">&#39;numWarmup&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
      <span class="s1">&#39;numCooldown&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="s1">&#39;delay&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="s1">&#39;numRun&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
      <span class="s1">&#39;connectionmanagement&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
        <span class="s1">&#39;numProcesses&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s1">&#39;runsPerConnection&#39;</span><span class="p">:</span> <span class="kc">None</span>
      <span class="p">},</span>
      <span class="s1">&#39;timer&#39;</span><span class="p">:</span>
      <span class="p">{</span>
        <span class="s1">&#39;connection&#39;</span><span class="p">:</span>
        <span class="p">{</span>
          <span class="s1">&#39;active&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
          <span class="s1">&#39;delay&#39;</span><span class="p">:</span> <span class="mi">0</span>
        <span class="p">},</span>
        <span class="s1">&#39;datatransfer&#39;</span><span class="p">:</span>
        <span class="p">{</span>
          <span class="s1">&#39;active&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
          <span class="s1">&#39;sorted&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
          <span class="s1">&#39;compare&#39;</span><span class="p">:</span> <span class="s1">&#39;result&#39;</span><span class="p">,</span>
          <span class="s1">&#39;store&#39;</span><span class="p">:</span> <span class="s1">&#39;dataframe&#39;</span><span class="p">,</span>
          <span class="s1">&#39;precision&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="reporting">
<h4>Reporting<a class="headerlink" href="#reporting" title="Permalink to this headline">¶</a></h4>
<p>Some options are used to configure reporting:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">intro</span></code>: Intro text for report</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">info</span></code>: Short info about the current experiment</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reporting</span></code>: Optional settings for latex report</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">resultsetPerQuery</span></code>: Show result sets for each query (and run, in case of randomized)<span class="raw-html-m2r"><br></span>
<code class="docutils literal notranslate"><span class="pre">None</span></code>: Don’t show
<code class="docutils literal notranslate"><span class="pre">False</span></code>: No limit
<code class="docutils literal notranslate"><span class="pre">n</span></code>: Maximum number of runs</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resultsetPerQueryConnection</span></code>: Show result sets for each query and dbms if differing (and run, in case of randomized)<span class="raw-html-m2r"><br></span>
<code class="docutils literal notranslate"><span class="pre">None</span></code>: Don’t show
<code class="docutils literal notranslate"><span class="pre">False</span></code>: No limit
<code class="docutils literal notranslate"><span class="pre">n</span></code>: Maximum number of runs</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">queryparameter</span></code>: Show set of parameters (in case of randomized query)<span class="raw-html-m2r"><br></span>
<code class="docutils literal notranslate"><span class="pre">None</span></code>: Don’t show
<code class="docutils literal notranslate"><span class="pre">False</span></code>: No limit
<code class="docutils literal notranslate"><span class="pre">n</span></code>: Maximum number of runs</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rowsPerResultset</span></code>: Show rows per result sets<span class="raw-html-m2r"><br></span>
<code class="docutils literal notranslate"><span class="pre">False</span></code>: No limit
<code class="docutils literal notranslate"><span class="pre">n</span></code>: Maximum number of rows</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="sql-dialects">
<h4>SQL Dialects<a class="headerlink" href="#sql-dialects" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">DBMS</span></code> key allows to specify SQL dialects. All connections starting with the key in this dict with use the specified alternative query. In the example above, for instance a connection ‘MySQL-InnoDB’ will use the alternative.
Optionally at the definition of the connections an attribute <code class="docutils literal notranslate"><span class="pre">dialect</span></code> can be used. For example MemSQL may use the dialect <code class="docutils literal notranslate"><span class="pre">MySQL</span></code>.</p>
</div>
<div class="section" id="connection-management">
<h4>Connection Management<a class="headerlink" href="#connection-management" title="Permalink to this headline">¶</a></h4>
<p>The first <code class="docutils literal notranslate"><span class="pre">connectionmanagement</span></code> options set global values valid for all DBMS. This can be overwritten by the settings in the <a class="reference external" href="#connection-file">connection config</a>. The second <code class="docutils literal notranslate"><span class="pre">connectionmanagement</span></code> is fixed valid for this particular query and cannot be overwritten.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">timeout</span></code>: Maximum lifespan of a connection. Default is None, i.e. no limit.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">numProcesses</span></code>: Number of parallel client processes. Default is 1.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">runsPerConnection</span></code>: Number of runs performed before connection is closed. Default is None, i.e. no limit.</p></li>
</ul>
</div>
<div class="section" id="connection-latency">
<h4>Connection Latency<a class="headerlink" href="#connection-latency" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">connection</span></code> timer will also measure the time for establishing a connection.
It is possible to force sleeping before each establishment by using <code class="docutils literal notranslate"><span class="pre">delay</span></code> (in seconds).
Default is 0.</p>
</div>
<div class="section" id="results-and-comparison">
<h4>Results and Comparison<a class="headerlink" href="#results-and-comparison" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">datatransfer</span></code> timer will also measure the time for data transfer.
The tool can store retrieved data to compare different queries and dbms.
This helps to be sure different approaches yield the same results.
For example the query above should always return the same number of rows in table <code class="docutils literal notranslate"><span class="pre">test</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">compare</span></code> can be used to compare result sets obtained from different runs and dbms.
<code class="docutils literal notranslate"><span class="pre">compare</span></code> is optional and can be</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">result</span></code>: Compare complete result set. Every cell is trimmed. Floats can be rounded to a given <code class="docutils literal notranslate"><span class="pre">precision</span></code> (decimal places). This is important for example for comparing CPU and GPU based DBMS.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hash</span></code>: Compare hash value of result set.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">size</span></code>: Compare size of result set.</p></li>
</ul>
<p>If comparison detects any difference in result sets, a warning is generated.</p>
<p>The result set can optionally be sorted by each column before comparison by using <code class="docutils literal notranslate"><span class="pre">sorted</span></code>.
This helps avoid mismatch due to different orderings in the received sets.</p>
<p>Note that comparing result sets necessarily means they have to be stored, so <code class="docutils literal notranslate"><span class="pre">result</span></code> should only be used for small data sets. The parameter <code class="docutils literal notranslate"><span class="pre">store</span></code> commands the tool to keep the result set and is automatically set to <code class="docutils literal notranslate"><span class="pre">True</span></code> if any of the above is used. It can be set to <code class="docutils literal notranslate"><span class="pre">False</span></code> to command the tool to fetch the result set and immediately forget it. This helps measuring the time for data transfer without having to store all result sets, which in particular for large result sets and numbers of runs can exhauste the RAM.
Setting <code class="docutils literal notranslate"><span class="pre">store</span></code> can also yield the result sets to be stored in extra files. Possible values are: <code class="docutils literal notranslate"><span class="pre">'store':</span> <span class="pre">['dataframe',</span> <span class="pre">'csv']</span></code></p>
</div>
</div>
<div class="section" id="randomized-query-file">
<h3>Randomized Query File<a class="headerlink" href="#randomized-query-file" title="Permalink to this headline">¶</a></h3>
<p>Example for <code class="docutils literal notranslate"><span class="pre">QUERY_FILE</span></code> with randomized parameters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Some simple queries&#39;</span><span class="p">,</span>
  <span class="s1">&#39;queries&#39;</span><span class="p">:</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s2">&quot;Count rows in test&quot;</span><span class="p">,</span>
      <span class="s1">&#39;query&#39;</span><span class="p">:</span> <span class="s2">&quot;SELECT COUNT(*) FROM test WHERE name = </span><span class="si">{NAME}</span><span class="s2">&quot;</span><span class="p">,</span>
      <span class="s1">&#39;parameter&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s2">&quot;list&quot;</span><span class="p">,</span>
          <span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="s1">&#39;range&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;AUTOMOBILE&quot;</span><span class="p">,</span><span class="s2">&quot;BUILDING&quot;</span><span class="p">,</span><span class="s2">&quot;FURNITURE&quot;</span><span class="p">,</span><span class="s2">&quot;MACHINERY&quot;</span><span class="p">,</span><span class="s2">&quot;HOUSEHOLD&quot;</span><span class="p">]</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="s1">&#39;numWarmup&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
      <span class="s1">&#39;numRun&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A <code class="docutils literal notranslate"><span class="pre">parameter</span></code> contain of a name <code class="docutils literal notranslate"><span class="pre">NAME</span></code>, a <code class="docutils literal notranslate"><span class="pre">range</span></code> (list), a <code class="docutils literal notranslate"><span class="pre">size</span></code>(optional, default 1) and a <code class="docutils literal notranslate"><span class="pre">type</span></code>, which can be</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">list</span></code>: list of values - random element</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">integer</span></code>: 2 integers - random value in between</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">float</span></code>: 2 floats - random value in between</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">date</span></code>: 2 dates in format ‘YYYY-mm-dd’ - random date in between</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">firstofmonth</span></code>: 2 dates in format ‘YYYY-mm-dd’ - first of random month in between</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">year</span></code>: 2 years as integers - random year in between</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hexcode</span></code>: 2 integers - random value in between as hexcode</p></li>
</ul>
<p>For each benchmark run, <code class="docutils literal notranslate"><span class="pre">{NAME}</span></code> is replaced by a (uniformly) randomly chosen value in the range and type given above.
By <code class="docutils literal notranslate"><span class="pre">size</span></code> we can specify the size of the sample (without replacement).
If set, each generated value will receive a <code class="docutils literal notranslate"><span class="pre">{NAME}</span></code> concatenated with the number of the sample.
Python3’s <code class="docutils literal notranslate"><span class="pre">format()</span></code> is used for replacement.
The values are generated once per query.
This means if a query is rerun or run for different dbms, the same list of values is used.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="p">{</span>
  <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span>
  <span class="s1">&#39;range&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">]</span>
<span class="p">},</span>
</pre></div>
</div>
<p>in a query with <code class="docutils literal notranslate"><span class="pre">numWarmup=5</span></code> and <code class="docutils literal notranslate"><span class="pre">numRun=10</span></code> will generate a random list of 10 integers between 1 and 100.
Each time the benchmark for this query is done, the same 10 numbers are used.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="p">{</span>
  <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span>
  <span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="s1">&#39;range&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">]</span>
<span class="p">},</span>
</pre></div>
</div>
<p>in a query with <code class="docutils literal notranslate"><span class="pre">numWarmup=5</span></code> and <code class="docutils literal notranslate"><span class="pre">numRun=10</span></code> will generate a random list of 10 pairs of integers between 1 and 100.
These pairs will replace <code class="docutils literal notranslate"><span class="pre">{NAME1}</span></code> and <code class="docutils literal notranslate"><span class="pre">{NAME2}</span></code> in the query.
Both elements of each pair will be different from eachother.
Each time the benchmark for this query is done, the same 10 pairs are used.</p>
</div>
<div class="section" id="query-list">
<h3>Query List<a class="headerlink" href="#query-list" title="Permalink to this headline">¶</a></h3>
<p>Example for <code class="docutils literal notranslate"><span class="pre">QUERY_FILE</span></code> with a query that is a sequence:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Some simple queries&#39;</span><span class="p">,</span>
  <span class="s1">&#39;queries&#39;</span><span class="p">:</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s2">&quot;Sequence&quot;</span><span class="p">,</span>
      <span class="s1">&#39;queryList&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span>
      <span class="s1">&#39;connectionmanagement&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="mi">600</span><span class="p">,</span>
        <span class="s1">&#39;numProcesses&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s1">&#39;runsPerConnection&#39;</span><span class="p">:</span> <span class="mi">4</span>
      <span class="p">},</span>
      <span class="s1">&#39;numRun&#39;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This query does not have a <code class="docutils literal notranslate"><span class="pre">query</span></code> attribute, but an attribute <code class="docutils literal notranslate"><span class="pre">queryList</span></code>.
It is a list of other queries, here number <code class="docutils literal notranslate"><span class="pre">2</span></code>, <code class="docutils literal notranslate"><span class="pre">3</span></code>, <code class="docutils literal notranslate"><span class="pre">4</span></code> and <code class="docutils literal notranslate"><span class="pre">5</span></code>.
The 12 benchmark runs are done by running these four queries one after the other, three times in total.
Here, we reconnect each time the sequence is through (<code class="docutils literal notranslate"><span class="pre">runsPerConnection</span></code> = 4) and we simulate one parallel client (<code class="docutils literal notranslate"><span class="pre">numProcesses</span></code> = 1).</p>
<p>This also respects randomization, i.e. every DBMS receives exactly the same versions of the queries in the same order.</p>
</div>
<div class="section" id="query">
<h3>Query<a class="headerlink" href="#query" title="Permalink to this headline">¶</a></h3>
<p>This parameter sets reading or running benchmarks to one fixed query.
For <code class="docutils literal notranslate"><span class="pre">mode=run</span></code> this means the fixed query is benchmarked (again), no matter if benchmarks already exist for this query.
For <code class="docutils literal notranslate"><span class="pre">mode=continue</span></code> this means missing benchmarks are performed for this fixed query only.
If reports are about to be generated, only the report for this fixed query is generated.
This does not apply to the latex reporter, which always generates a complete report due to technical reasons.
Queries are numbered starting at 1.</p>
</div>
<div class="section" id="connection">
<h3>Connection<a class="headerlink" href="#connection" title="Permalink to this headline">¶</a></h3>
<p>This parameter sets running benchmarks to one fixed DBMS (connection).
For <code class="docutils literal notranslate"><span class="pre">mode=run</span></code> this means the fixed DBMS is benchmarked (again), no matter if benchmarks already exist for it.
For <code class="docutils literal notranslate"><span class="pre">mode=continue</span></code> this means missing benchmarks are performed for this fixed DBMS only.
If reports are about to be generated, all reports involving this fixed DBMS are generated.
Connections are called by name.</p>
</div>
<div class="section" id="generate-reports">
<h3>Generate reports<a class="headerlink" href="#generate-reports" title="Permalink to this headline">¶</a></h3>
<p>If set to yes, some reports are generated each time a benchmark of a single connection and query is finished.
Currently this means</p>
<ul class="simple">
<li><p><a class="reference external" href="Evaluations.html#timers-per-query">bar charts</a> as png files</p></li>
<li><p><a class="reference external" href="Evaluations.html#plot-of-values">plots</a> as png files</p></li>
<li><p><a class="reference external" href="Evaluations.html#boxplot-of-values">boxplots</a> as png files</p></li>
<li><p><a class="reference external" href="Evaluations.html#all-benchmark-times">dataframer</a> - benchmark times as pickled dataframe files</p></li>
<li><p><a class="reference external" href="Evaluations.html#statistics-table">pickler</a> - statistics as pickled dataframe files</p></li>
<li><p><a class="reference external" href="Evaluations.html#hardware-metrics-per-query">metricer</a> - hardware metrics as png and csv files</p></li>
<li><p>latexer, see an <a class="reference external" href="Report-example-tpch.pdf">example report</a>, also containing all plots and charts, and possibly error messages and fetched result tables. The latex reporter demands all other reporters to be active.</p></li>
</ul>
<p>Reports are generated per query, that is one for each entry in the list in the <code class="docutils literal notranslate"><span class="pre">QUERY_FILE</span></code>.
The latex survey file contains all latex reports, that is all <a class="reference external" href="Evaluations.html">evaluations</a> for all queries.</p>
</div>
<div class="section" id="generate-evaluation">
<h3>Generate evaluation<a class="headerlink" href="#generate-evaluation" title="Permalink to this headline">¶</a></h3>
<p>If set to yes, an evaluation file is generated. This is a JSON file containing most of the <a class="reference external" href="Evaluations.html">evaluations</a>.
It can be accessed most easily using the inspection class or the interactive dashboard.</p>
</div>
<div class="section" id="debug">
<h3>Debug<a class="headerlink" href="#debug" title="Permalink to this headline">¶</a></h3>
<p>This flag activates output of debug infos.</p>
</div>
<div class="section" id="sleep">
<h3>Sleep<a class="headerlink" href="#sleep" title="Permalink to this headline">¶</a></h3>
<p>Time in seconds to wait before starting to operate.
This is handy when we want to wait for other systems (e.g. a DBMS) to startup completely.</p>
</div>
<div class="section" id="batch">
<h3>Batch<a class="headerlink" href="#batch" title="Permalink to this headline">¶</a></h3>
<p>This flag changes the output slightly and should be used for logging if script runs in background.
This also means reports are generated only at the end of processing.
Batch mode is automatically turned on if debug mode is used.</p>
</div>
<div class="section" id="verbosity-level">
<h3>Verbosity Level<a class="headerlink" href="#verbosity-level" title="Permalink to this headline">¶</a></h3>
<p>Using the flags <code class="docutils literal notranslate"><span class="pre">-vq</span></code> means each query that is sent is dumped to stdout.
Using the flags <code class="docutils literal notranslate"><span class="pre">-vs</span></code> means after each query that has been finished, some statistics are dumped to stdout.</p>
</div>
<div class="section" id="working-querywise-or-connectionswise">
<h3>Working querywise or connectionswise<a class="headerlink" href="#working-querywise-or-connectionswise" title="Permalink to this headline">¶</a></h3>
<p>This options sets if benchmarks are performed per query (one after the other is completed) or per connection (one after the other is completed).</p>
<p>This means processing <code class="docutils literal notranslate"><span class="pre">-w</span> <span class="pre">query</span></code> is</p>
<ul class="simple">
<li><p>loop over queries q</p>
<ul>
<li><p>loop over connections c</p>
<ul>
<li><p>making n benchmarks for q and c</p></li>
<li><p>compute statistics</p></li>
<li><p>save results</p></li>
<li><p>generate reports</p></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>and processing <code class="docutils literal notranslate"><span class="pre">-w</span> <span class="pre">connection</span></code> is</p>
<ul class="simple">
<li><p>loop over connections c</p>
<ul>
<li><p>loop over queries q</p>
<ul>
<li><p>making n benchmarks for q and c</p></li>
<li><p>compute statistics</p></li>
<li><p>save results</p></li>
<li><p>generate reports</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="anonymize">
<h3>Anonymize<a class="headerlink" href="#anonymize" title="Permalink to this headline">¶</a></h3>
<p>Setting <code class="docutils literal notranslate"><span class="pre">-a</span></code> anonymizes all dbms.
This hides the name of the connections consistently in all reports.
You may unanonymize one or more dbms by using <code class="docutils literal notranslate"><span class="pre">-u</span></code> followed by a list of names of connections.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">benchmark.py</span> <span class="pre">read</span> <span class="pre">-r</span> <span class="pre">1234</span> <span class="pre">-a</span> <span class="pre">-u</span> <span class="pre">MySQL</span></code> would hide the name of all connections except for MySQL.</p>
</div>
<div class="section" id="latex-reports">
<h3>Latex reports<a class="headerlink" href="#latex-reports" title="Permalink to this headline">¶</a></h3>
<p>The option <code class="docutils literal notranslate"><span class="pre">-l</span></code> can be used to change the templates for the generation of latex reports. The default is <code class="docutils literal notranslate"><span class="pre">pagePerQuery</span></code>.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">benchmark.py</span> <span class="pre">read</span> <span class="pre">-r</span> <span class="pre">1234</span> <span class="pre">-g</span> <span class="pre">yes</span> <span class="pre">-l</span> <span class="pre">simple</span></code> would use the templates located in <code class="docutils literal notranslate"><span class="pre">latex/simple</span></code>.</p>
</div>
<div class="section" id="client-processes">
<h3>Client processes<a class="headerlink" href="#client-processes" title="Permalink to this headline">¶</a></h3>
<p>This tool simulates parallel queries from several clients.
The option <code class="docutils literal notranslate"><span class="pre">-p</span></code> can be used to change the global setting for the number of parallel processes.
Moreover each connection can have a local values for this parameter.
If nothing is specified, the default value is used, which is half of the number of processors.</p>
</div>
<div class="section" id="random-seed">
<h3>Random Seed<a class="headerlink" href="#random-seed" title="Permalink to this headline">¶</a></h3>
<p>The option <code class="docutils literal notranslate"><span class="pre">-s</span></code> can be used to specify a random seed.
This should guarantee reproducible results for randomized queries.</p>
</div>
<div class="section" id="subfolders">
<h3>Subfolders<a class="headerlink" href="#subfolders" title="Permalink to this headline">¶</a></h3>
<p>If the flag <code class="docutils literal notranslate"><span class="pre">--copy-subfolder</span></code> is set, connection and query configuration will be copied from an existing result folder to a subfolder.
The name of the subfolder can be set via <code class="docutils literal notranslate"><span class="pre">--subfolder</span></code>.
These flags can be used to allow parallel quering of independent dbmsbenchmarker:
Each will write in an own subfolder.
These partial results can be merged using the <code class="docutils literal notranslate"><span class="pre">merge.py</span></code> command line tool.
The normal behaviour is: If we run the same connection twice, the results of the first run will be overwritten.
Since we might query the same connection in these instances, the subfolders will be numbered automatically.
Using <code class="docutils literal notranslate"><span class="pre">MAX_SUBFOLDERS</span></code> we can limit the number of subfolders that are allowed.<span class="raw-html-m2r"><br></span>
Example: <code class="docutils literal notranslate"><span class="pre">-r</span> <span class="pre">/tmp/dbmsresults/1234/</span> <span class="pre">-cs</span> <span class="pre">-sf</span> <span class="pre">MySQL</span></code> will continue the benchmarks of folder <code class="docutils literal notranslate"><span class="pre">/tmp/dbmsresults/1234/</span></code> by creating a folder <code class="docutils literal notranslate"><span class="pre">/tmp/dbmsresults/1234/MySQL-1</span></code>.
If that folder already exists, <code class="docutils literal notranslate"><span class="pre">/tmp/dbmsresults/1234/MySQL-2</span></code> will be used etc.</p>
<p>This is in particular used by <a class="reference external" href="https://github.com/Beuth-Erdelt/Benchmark-Experiment-Host-Manager">https://github.com/Beuth-Erdelt/Benchmark-Experiment-Host-Manager</a> for jobs of parallel benchmarker.</p>
</div>
<div class="section" id="delay-start">
<h3>Delay start<a class="headerlink" href="#delay-start" title="Permalink to this headline">¶</a></h3>
<p>The parameter <code class="docutils literal notranslate"><span class="pre">--sleep</span></code> can be used to set a start time.
DBMSBenchmarker will wait until the given time is reached.</p>
<p>This is in particular used by <a class="reference external" href="https://github.com/Beuth-Erdelt/Benchmark-Experiment-Host-Manager">https://github.com/Beuth-Erdelt/Benchmark-Experiment-Host-Manager</a> for synching jobs of parallel benchmarker.</p>
</div>
<div class="section" id="id2">
<h3>Monitoring<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>The parameter <code class="docutils literal notranslate"><span class="pre">--metrics</span></code> can be used to activate fetching metrics from a Prometheus server.
In the <code class="docutils literal notranslate"><span class="pre">connection.config</span></code> we may insert a section per connection about where to fetch these metrics from and which metrics we want to obtain.<span class="raw-html-m2r"><br></span>
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;monitoring&#39;</span><span class="p">:</span> <span class="p">{</span>
  <span class="s1">&#39;grafanashift&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s1">&#39;grafanaextend&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
  <span class="s1">&#39;prometheus_url&#39;</span><span class="p">:</span> <span class="s1">&#39;http://127.0.0.1:9090/api/v1/&#39;</span><span class="p">,</span>
  <span class="s1">&#39;metrics&#39;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">&#39;total_cpu_memory&#39;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s1">&#39;query&#39;</span><span class="p">:</span> <span class="s1">&#39;container_memory_working_set_bytes{job=&quot;monitor-node&quot;}/1024/1024&#39;</span><span class="p">,</span>
      <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;CPU Memory [MiB]&#39;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">grafanashift</span></code> shifts the fetched interval by <code class="docutils literal notranslate"><span class="pre">n</span></code> seconds to the future.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grafanaextend</span></code> extends the fetched interval by <code class="docutils literal notranslate"><span class="pre">n</span></code> seconds at both ends.</p></li>
</ul>
<p>More information about monitoring and metrics can be found here: <a class="reference external" href="https://github.com/Beuth-Erdelt/Benchmark-Experiment-Host-Manager/blob/master/docs/Monitoring.html">https://github.com/Beuth-Erdelt/Benchmark-Experiment-Host-Manager/blob/master/docs/Monitoring.html</a></p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Patrick Erdelt.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

  
  
    
   

</body>
</html>